# 视觉优化说明

## 🎨 主要视觉增强

### 1. 树形可视化优化

#### 节点设计
- **多层次节点样式**
  - 未访问节点：浅灰色，半透明，虚线边框
  - 已访问节点：深灰色，实心，带序号标记
  - 当前节点：紫色渐变，脉冲动画，外圈装饰
  - 结果节点：绿色渐变，旋转动画

- **节点尺寸**
  - 未访问：半径 20px
  - 已访问：半径 24px
  - 当前节点：半径 32px
  - 结果节点：半径 28px

- **图标动画**
  - 当前节点图标：上下跳动动画
  - 结果节点图标：轻微旋转动画
  - 悬停时图标：放大并旋转

#### 连接线设计
- **三种状态**
  - 未访问路径：浅灰虚线，半透明
  - 已访问路径：深灰实线，加粗
  - 当前激活路径：紫色渐变，流动动画，发光效果

- **贝塞尔曲线**
  - 使用平滑的三次贝塞尔曲线
  - 控制点偏移量为垂直距离的 60%
  - 创造自然流畅的连接效果

#### 布局算法
- **改进的自动布局**
  - 两遍遍历：先统计每层节点数，再计算位置
  - 动态间距：根据节点数量自动调整水平间距
  - 垂直间距：第一层 80px，其他层 150px
  - 自适应尺寸：SVG 尺寸根据树结构动态调整

### 2. 交互动画

#### 节点动画
- **淡入动画**：节点逐个淡入，带延迟效果
- **脉冲动画**：当前节点持续缩放脉冲
- **悬停效果**：节点放大 1.15 倍，带阴影
- **光晕效果**：当前节点背景光晕脉冲

#### 连接线动画
- **淡入动画**：连接线逐条淡入
- **流动动画**：激活路径虚线流动效果
- **颜色过渡**：状态变化时平滑过渡

#### 界面动画
- **卡片滑入**：从下方滑入，带淡入效果
- **选项悬停**：
  - 向右滑动 8px
  - 放大 1.02 倍
  - 渐变背景变化
  - 光泽扫过效果
- **进度条**：
  - 平滑填充动画
  - 光泽扫过效果
  - 发光阴影

### 3. 色彩系统

#### 主色调
```css
主渐变：#667eea → #764ba2
节点渐变：#667eea → #764ba2
结果渐变：#4caf50 → #45a049
背景渐变：#f5f7fa → #c3cfe2
```

#### 节点颜色
- 未访问：#fafafa / #e0e0e0
- 已访问：#e0e0e0 / #9e9e9e
- 当前：紫色渐变
- 结果：绿色渐变

#### 连接线颜色
- 未访问：#e8e8e8
- 已访问：#9e9e9e
- 激活：紫色渐变

### 4. SVG 滤镜效果

#### 发光滤镜 (glow)
```xml
<filter id="glow">
  <feGaussianBlur stdDeviation="3"/>
  <feMerge>...</feMerge>
</filter>
```
用于：当前节点、激活路径

#### 阴影滤镜 (shadow)
```xml
<filter id="shadow">
  <feGaussianBlur stdDeviation="3"/>
  <feOffset dx="0" dy="2"/>
  ...
</filter>
```
用于：所有节点、标签背景

### 5. 图例设计

#### 样式特点
- 渐变背景卡片
- 白色圆角按钮
- 图标 + 文字组合
- 悬停上浮效果
- 阴影增强

#### 响应式布局
- 桌面端：水平排列，间距 30px
- 移动端：自动换行，间距 15px

### 6. 背景装饰

#### 网格动画
- 径向渐变点阵图案
- 50px × 50px 网格
- 20 秒循环移动
- 半透明白色
- 不影响交互

### 7. 响应式优化

#### 桌面端 (>768px)
- 最大宽度：1200px
- 完整动画效果
- 大号字体和图标

#### 移动端 (≤768px)
- 自适应宽度
- 简化动画
- 优化触摸区域
- 横向滚动支持

### 8. 性能优化

#### CSS 动画
- 使用 transform 和 opacity
- 硬件加速
- 避免重排重绘

#### 过渡效果
- cubic-bezier 缓动函数
- 合理的动画时长
- 延迟加载效果

#### SVG 优化
- 元素复用
- 渐变和滤镜定义复用
- 最小化 DOM 操作

## 🎯 视觉层次

### 优先级 1：当前节点
- 最大尺寸
- 紫色渐变
- 脉冲动画
- 外圈装饰
- 发光效果

### 优先级 2：已访问路径
- 中等尺寸
- 深色显示
- 序号标记
- 加粗连接线

### 优先级 3：未访问节点
- 最小尺寸
- 浅色半透明
- 虚线连接
- 低对比度

### 优先级 4：结果节点
- 特殊尺寸
- 绿色渐变
- 旋转动画
- 发光效果

## 📊 动画时序

```
页面加载
  ↓
节点淡入 (0.5s, 延迟 index * 0.05s)
  ↓
连接线淡入 (0.5s, 延迟 index * 0.1s)
  ↓
持续动画
  - 当前节点脉冲 (2s 循环)
  - 图标跳动 (1.5s 循环)
  - 路径流动 (2s 循环)
  - 光晕脉冲 (2s 循环)
```

## 🎨 设计原则

1. **清晰的视觉层次**：通过大小、颜色、动画区分状态
2. **流畅的动画**：使用缓动函数，避免生硬过渡
3. **一致的风格**：统一的圆角、间距、阴影
4. **适度的装饰**：增强美观但不影响可读性
5. **响应式设计**：适配各种屏幕尺寸
6. **性能优先**：使用 CSS 动画，避免 JS 计算

## 🚀 未来优化方向

- [ ] 添加节点展开/收起功能
- [ ] 支持拖拽调整布局
- [ ] 添加缩放和平移功能
- [ ] 导出为图片功能
- [ ] 自定义主题颜色
- [ ] 更多动画效果选项
