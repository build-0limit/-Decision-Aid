# 更新日志

## [1.4.1] - 2026-01-15

### 1. 分享链接延迟展示优化 ✅

**问题**：分享链接生成后立即展示，可能导致写入未完成时用户访问链接失败。

**解决方案**：
- 在 API 响应成功后，添加 1.5 秒的延迟再展示链接
- 延迟期间显示加载动画和提示文字
- 使用旋转加载图标提升用户体验

**改进点**：
- 确保数据库写入同步完成
- 提供视觉反馈，让用户知道系统正在处理
- 避免用户访问未就绪的分享链接

### 2. 决策树生成加载动画 ✅

**问题**：生成决策树时用户等待过程缺乏视觉反馈。

**解决方案**：
- 添加全屏加载覆盖层，带有毛玻璃效果
- 使用动画图标（🧠 大脑图标）表示 AI 思考
- 添加三点跳动动画
- 添加渐变进度条动画
- 提供清晰的文字提示

**应用场景**：
1. **初次生成决策树**：显示"AI 正在为你生成决策树..."
2. **动态生成下一层**：显示"正在生成下一层决策..."（使用 🌳 树图标）

**用户体验提升**：
- 视觉上更加专业和流畅
- 减少用户等待焦虑
- 明确告知系统正在处理
- 禁用按钮防止重复点击

## 技术实现

### 动画效果
- 使用 CSS `@keyframes` 实现流畅动画
- 旋转加载器（spinner）
- 跳动的点动画（dotPulse）
- 浮动图标动画（bounce）
- 渐变进度条动画（loadingProgress）

### 过渡效果
- 使用 Vue 的 `<transition>` 组件
- 淡入淡出效果（fade）
- 缩放进入效果（scaleIn）

### 响应式设计
- 覆盖层自适应屏幕尺寸
- 移动端友好的布局
- 毛玻璃背景效果（backdrop-filter）

## [1.4.0] - 2026-01-14

### ✨ 新增功能

#### 决策树分享功能
- 🔗 一键生成分享链接
- 📤 支持将完成的决策树分享给他人
- 🌐 使用 KV 存储分享数据
- 📋 一键复制分享链接
- 👁️ 分享查看页面，展示完整决策树和路径
- 🔒 支持自定义分享代码（可选）

#### API 端点
- `POST /api/shares` - 创建分享
- `GET /api/shares/{code}` - 获取分享
- `DELETE /api/shares/{code}` - 删除分享

#### 前端功能
- 结果页面添加分享按钮
- 分享链接生成和显示
- 复制链接功能（支持降级方案）
- 分享查看页面（只读模式）
- 自动检测分享链接并加载

### 🔧 配置变更
- 添加 KV 命名空间配置
- Workers 环境变量配置

---

## [1.3.0] - 2026-01-14

### ✨ 新增功能

#### 逐层生成决策树
- 🌳 改为用户每选择一次生成一层，而不是一次性生成整棵树
- ⚡ 更快的初始响应时间
- 🎯 根据用户选择动态调整后续问题
- 💰 减少不必要的 LLM API 调用
- 🔄 更灵活的决策路径

#### 上下文传递
- 📝 支持传递决策上下文（isFirstLevel, previousChoices, selectedOption）
- 🧠 LLM 可以根据之前的选择生成更相关的问题
- 📊 完整的决策路径追踪

#### 节点缓存
- 💾 已生成的节点自动缓存在 option.next
- 🔙 用户返回后再次选择无需重新生成
- ⚡ 提升用户体验和性能

### 🎨 优化改进

#### 前端优化
- 动态附加节点到决策树
- 智能判断是否需要生成下一层
- 保留已生成节点的缓存

#### 后端优化
- 支持上下文感知的决策树生成
- 针对第一层和后续层的不同 prompt
- 模拟数据也支持逐层生成

### 📚 文档更新
- 新增 `INCREMENTAL_GENERATION.md` - 逐层生成详细说明
- 更新 `CHANGELOG.md` - 记录新功能

---

## [1.2.0] - 2026-01-14

### ✨ 新增功能

#### Workers 集成
- 🌐 完整的 Workers API 实现
- 🔌 前端通过 fetch 直接调用 Workers API
- 🚀 支持边缘计算部署

---

## [1.1.0] - 2026-01-14

### ✨ 新增功能

#### 配置中心
- 🎨 全新的可视化配置界面
- 🔌 支持多种 LLM 服务商（OpenAI、Anthropic、自定义 API）
- 💾 配置自动保存到浏览器 localStorage
- 🔍 API 连接测试功能
- 👁️ API Key 显示/隐藏切换
- 🎚️ Temperature 滑块调节
- ⚙️ 模型选择下拉菜单

#### API 集成
- 🤖 OpenAI GPT-4/GPT-4 Turbo/GPT-3.5 Turbo 支持
- 🧠 Anthropic Claude 3 系列支持
- 🔧 自定义 API 端点支持
- 🔄 自动错误处理和回退机制
- 📝 标准化的决策树 JSON 格式

#### 用户界面
- 🎯 右上角配置按钮
- 📊 API 状态指示器
- 🎨 配置模态框动画效果
- ✅ 测试结果实时反馈

### 🎨 优化改进

#### 视觉效果
- 渐变背景网格动画
- 配置按钮旋转动画
- 状态指示器脉冲动画
- 模态框淡入淡出过渡

#### 用户体验
- 配置验证和提示
- 友好的错误信息
- 自动保存配置
- 响应式布局优化

### 📚 文档更新
- 新增 `CONFIG_GUIDE.md` - 配置中心使用指南
- 新增 `API_INTEGRATION.md` - API 集成说明
- 更新 `README.md` - 添加配置中心说明
- 更新 `QUICKSTART.md` - 添加配置步骤
- 更新 `FEATURES.md` - 添加配置中心功能

---

## [1.0.0] - 2026-01-14

### ✨ 初始版本

#### 核心功能
- 🧠 LLM 驱动的决策树生成
- 🌳 SVG 树形可视化
- 📊 实时决策追踪
- 🔄 支持返回上一步
- 📱 响应式设计

#### 树形可视化
- 自动布局算法
- 四种节点状态（未访问、已访问、当前、结果）
- 三种连接线状态（未访问、已访问、激活）
- 平滑贝塞尔曲线连接
- SVG 滤镜效果（发光、阴影）

#### 动画效果
- 节点脉冲动画
- 图标跳动/旋转动画
- 连接线流动动画
- 光晕效果
- 悬停交互动画

#### 用户界面
- 渐变紫色主题
- 三阶段流程（输入、决策、结果）
- 进度条显示
- 决策路径回顾
- 图例说明

#### 技术实现
- Vue 3 Composition API
- SVG 渲染
- 模块化服务层
- 演示数据模式

### 📚 文档
- `README.md` - 项目说明
- `QUICKSTART.md` - 快速开始指南
- `FEATURES.md` - 功能详解
- `VISUAL_ENHANCEMENTS.md` - 视觉优化说明

---

## 版本说明

### 版本号规则
- 主版本号：重大功能更新或架构变更
- 次版本号：新功能添加
- 修订号：Bug 修复和小优化

### 更新类型
- ✨ 新增功能
- 🎨 优化改进
- 🐛 Bug 修复
- 📚 文档更新
- 🔧 配置变更
- ⚡ 性能优化
- 🔐 安全更新

---

## 路线图

### 计划中的功能

#### v1.2.0
- [ ] 决策树导出功能（PNG、JSON）
- [ ] 决策历史记录
- [ ] 多语言支持
- [ ] 自定义主题颜色

#### v1.3.0
- [ ] 节点展开/收起功能
- [ ] 树形图缩放和平移
- [ ] 拖拽调整布局
- [ ] 节点编辑功能

#### v2.0.0
- [ ] 后端服务集成
- [ ] 用户账户系统
- [ ] 决策树模板库
- [ ] 协作功能
- [ ] 数据分析和统计

### 社区建议
欢迎在 GitHub Issues 中提出功能建议和改进意见！

---

## 贡献者

感谢所有为项目做出贡献的开发者！

---

## 许可证

MIT License - 详见 LICENSE 文件
